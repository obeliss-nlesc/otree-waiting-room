<!DOCTYPE html>
<html>
<title>Waiting Room</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

<body>
  <div class="w3-container w3-gray">
    <p>
    <%= headerText %>
    </p>
  </div>
  <div class="w3-row">
    <div class="w3-col w3-container m4 l3 w3-yellow w3-padding">
      <table class="w3-table">
        <tr>
          <th>Beloningen</th>
          <th></th>
        </tr>
        <tr>
          <td>Meedoen</td>
          <td> <%= meedoenValue %></td>
        </tr>
        <tr>
          <td>Afronden</td>
          <td> <%= afrondenValue %></td>
        </tr>
        <tr>
          <td>Bonus</td>
          <td> <%= bonusValue %></td>
        </tr>
      </table>
    </div>
    <div class="w3-col w3-container w3-center w3-blue m8 l9 w3-padding">
      <button class="w3-btn w3-jumbo w3-green">Start</button>
      <p>Druk op start om in de wachtkamer plaats te nemen</p>
    </div>
  </div>
  <!-- Waiting Room HTML Code -->

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const experimentId = '<%= experimentId %>';
    const userId = '<%= userId %>';
    // Connect to the WebSocket server
    const socket = io();

    // Handle connection established
    socket.on('connect', () => {
      console.log('Connected to server');
      socket.emit("newUser", {
        'experimentId': experimentId,
        'userId': userId
      })
    });

    // Handle disconnection
    socket.on('disconnect', () => {
      console.log('Disconnected from server');
    });

    // Handle redirect to game
    socket.on('gameStart', (data) => {
      console.log('Redirecting to game:', data.room);
      window.location.href = data.room; // Redirect to the game URL
    });
  </script>


</body>
</html>

